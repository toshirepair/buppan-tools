<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒãƒ«ãƒã‚µã‚¤ãƒˆä¸€æ‹¬ãƒªã‚µãƒ¼ãƒãƒ„ãƒ¼ãƒ«</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 16px;
      line-height: 1.6;
    }
    h1 {
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
    }
    .card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 16px;
      margin-top: 12px;
    }
    label {
      display: inline-block;
      margin-right: 12px;
      margin-bottom: 4px;
    }
    input[type="text"] {
      width: 100%;
      padding: 8px;
      font-size: 1rem;
      box-sizing: border-box;
    }
    button {
      padding: 10px 18px;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 6px;
      border: none;
      background: #2563eb;
      color: #fff;
      margin-top: 12px;
    }
    .small {
      font-size: 0.85rem;
      color: #555;
    }
    ul.result-list {
      list-style: none;
      padding-left: 0;
      margin-top: 8px;
    }
    a.result-link {
      color: #2563eb;
      text-decoration: underline;
    }
    textarea.copy-area {
      width: 100%;
      min-height: 120px;
      font-size: 0.85rem;
      margin-top: 8px;
      white-space: pre-wrap;
    }
  </style>
</head>

<body>
<h1>ãƒãƒ«ãƒã‚µã‚¤ãƒˆä¸€æ‹¬ãƒªã‚µãƒ¼ãƒãƒ„ãƒ¼ãƒ«</h1>

<div class="card">
  <div>
    <button type="button" id="openGoogleLensBtn" style="background:#6b7280;">Googleãƒ¬ãƒ³ã‚ºã‚’é–‹ã</button>
  </div>

  <div style="margin-top:12px;">
    <strong>å‹ç•ªï¼ˆãƒ™ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼‰</strong>
    <div style="display:flex; gap:8px;">
      <input type="text" id="keyword" placeholder="ä¾‹ï¼šNikon D750 50mm f1.8">
      <button type="button" id="clearKeywordBtn" style="background:#6b7280;">ã‚¯ãƒªã‚¢</button>
    </div>
  </div>

  <button id="runBtn">æ¤œç´¢</button>
</div>

<div id="result" class="card" style="display:none;">
  <strong>ãƒªãƒ³ã‚¯ä¸€è¦§ï¼ˆã‚¹ãƒãƒ›ï¼PCå…±é€šï¼‰</strong>
  <div id="resultLinks"></div>
</div>

<script>
  // ===== å›ºå®šï¼šæ™‚é–“å‰µå‡ºã¯å¸¸ã«106ç§’ =====
  const CREATED_SECONDS = 106;

  // æ›ç®—ç”¨å›ºå®šå€¤
  const DAILY_COUNT = 10;
  const HOURLY_WAGE = 1500;
  const PROFIT_PER_REPAIR = 5000;
  const HOURS_PER_OUTING = 7;

  document.getElementById("clearKeywordBtn").onclick = () => {
    document.getElementById("keyword").value = "";
    document.getElementById("result").style.display = "none";
  };

  document.getElementById("runBtn").onclick = () => {
    const kw = document.getElementById("keyword").value.trim();
    if (!kw) {
      alert("ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
      return;
    }

    const links = [
      { label: "eBay", url: "https://www.ebay.com" },
      { label: "ãƒ¤ãƒ•ã‚ªã‚¯", url: "https://auctions.yahoo.co.jp" },
      { label: "ãƒ¡ãƒ«ã‚«ãƒª", url: "https://jp.mercari.com" }
    ];

    renderLinks(links, kw);
  };

  function renderLinks(links, keyword) {
    const result = document.getElementById("result");
    const box = document.getElementById("resultLinks");

    let html = "<ul class='result-list'>";
    links.forEach(l => {
      html += `<li><a class="result-link" href="${l.url}" target="_blank">${l.label}</a></li>`;
    });
    html += "</ul>";

    // ===== æ™‚é–“å‰µå‡º è¨ˆç®—ï¼ˆå›ºå®š106ç§’ï¼‰=====
    const perSearch = CREATED_SECONDS;
    const dailyMin = Math.round((perSearch * DAILY_COUNT) / 60);
    const yearlyHours = Math.round((perSearch * DAILY_COUNT * 365) / 3600);
    const yearlyWage = yearlyHours * HOURLY_WAGE;
    const repairCount = yearlyHours;
    const repairProfit = repairCount * PROFIT_PER_REPAIR;
    const familyTrips = Math.round(yearlyHours / HOURS_PER_OUTING);

    html += `
      <hr>
      <p><strong>æœ¬ãƒ„ãƒ¼ãƒ«ã®æ™‚é–“ï¼ˆä¾¡å€¤ï¼‰åŠ¹æœã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</strong></p>

      <p><strong>â± æ™‚é–“å‰µå‡ºï¼ˆç›®å®‰ï¼‰</strong></p>
      <ul class="small">
        <li>ä»Šå›ã®æ¤œç´¢ï¼šç´„ ${Math.floor(perSearch/60)}åˆ†${perSearch%60}ç§’</li>
        <li>1æ—¥10å›ãªã‚‰ï¼šç´„ ${dailyMin} åˆ†ï¼æ—¥</li>
        <li>1å¹´ãªã‚‰ï¼šç´„ ${yearlyHours} æ™‚é–“ï¼å¹´</li>
      </ul>

      <p><strong>ğŸ’° æ™‚çµ¦æ›ç®—ï¼ˆæ™‚çµ¦ ${HOURLY_WAGE.toLocaleString()} å††ï¼‰</strong></p>
      <ul class="small">
        <li>å¹´é–“ï¼š${yearlyWage.toLocaleString()} å†† ç›¸å½“</li>
      </ul>

      <p><strong>ğŸ”§ ãƒªãƒšã‚¢æ›ç®—ï¼ˆ1æ™‚é–“1å€‹ï¼1å€‹åˆ©ç›Š ${PROFIT_PER_REPAIR.toLocaleString()} å††ï¼‰</strong></p>
      <ul class="small">
        <li>å¹´é–“ï¼š${repairCount} å€‹ã®ãƒªãƒšã‚¢ãŒå¯èƒ½</li>
        <li>æ¨å®šåˆ©ç›Šï¼š${repairProfit.toLocaleString()} å††</li>
      </ul>

      <p><strong>ğŸ• ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆæ›ç®—</strong></p>
      <ul class="small">
        <li>å¹´é–“ï¼šå®¶æ—å¤–å‡ºï¼ˆ7æ™‚é–“ï¼‰ãªã‚‰ï¼šç´„ ${familyTrips} å›åˆ†ã®æ€ã„å‡ºãŒä½œã‚Œã‚‹</li>
      </ul>

      <p class="small">
        â€» ä¸Šè¨˜ã¯ä½œè€…ãŒPCã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ5ã‚µã‚¤ãƒˆã‚’ä¸€ã¤ãšã¤æ¤œç´¢ã—ãŸå ´åˆã¨æœ¬ãƒ„ãƒ¼ãƒ«ã§ä¸€æ‹¬æ¤œç´¢ã—ãŸå ´åˆã®å®Ÿæ¸¬å€¤ã‚’ã‚‚ã¨ã«ã—ãŸæ™‚çŸ­åŠ¹æœã®ç›®å®‰ã§ã™ã€‚æ“ä½œç’°å¢ƒã‚„æ…£ã‚Œã«ã‚ˆã‚Šå‰å¾Œã—ã¾ã™ã€‚
      </p>
    `;

    box.innerHTML = html;
    result.style.display = "block";

    // â˜… è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
    requestAnimationFrame(() => {
      result.scrollIntoView({ behavior: "smooth", block: "start" });
    });
  }
</script>
</body>
</html>
